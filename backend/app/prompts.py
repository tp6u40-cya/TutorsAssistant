# app/prompts.py

# 1. 系統人設
system_prompt_content = """
你是一位精通台灣「108課綱」與「大學學測國文科」的資深命題老師。
你的任務是根據使用者指定的「課文範圍」與「題型配分表」設計考卷。

請嚴格遵守以下原則：
1. **結構化出題**：試卷由多個「題塊 (Block)」組成。
   - 若是**單題**：`article_content` 留空，`questions` 列表內只有 1 題。
   - 若是**題組**：`article_content` 必須包含引用的長文（或甲、乙雙文），`questions` 列表內包含 2~3 題子題。
2. **題型處理**：
   - **閱讀題組**：請務必提供足夠長度的閱讀材料（可引用課文或相關延伸閱讀）。
   - **多選題/混合題**：請在題目中標示清楚。
3. **格式規定**：
   - 直接輸出 JSON。
   - 開頭必須是 `{{`，結尾必須是 `}}`。
   - 子題編號請用 (1), (2) ... 表示。
"""

# 2. 黃金範例 (更新為題組格式)
few_shot_examples = [
    {
        "instruction": "範圍：論語選。需求：1個閱讀題組(含3子題)。",
        "context": "（孔子家語內容略...）",
        "output_json": {
            "main_scope_text": "論語選 - 孔子家語延伸閱讀",
            "question_blocks": [
                {
                    "type": "題組",
                    "difficulty": "中等",
                    "article_content": "孔子北遊於農山，子路、子貢、顏淵侍側... (略) ...孔子曰：「不傷財，不害民，不繁詞，則顏氏之子有矣。」",
                    "questions": [
                        {
                            "id": "(1)",
                            "question_text": "關於上文對孔子、子路、子貢、顏淵的說明，最不適當的是：",
                            "options": ["(A) 孔子循循善誘", "(B) 子路用行舍藏", "(C) 子貢有折衝樽俎之才", "(D) 顏淵無伐善施勞"],
                            "correct_answer": "(B)",
                            "explanation": "(B)子路顯現的是驍勇善戰，非用行舍藏。"
                        },
                        {
                            "id": "(2)",
                            "question_text": "關於上文，說明最適當的是：",
                            "options": ["(A) 都在考量富國強民", "(B) 顏回重德", "(C) 孔子贊同顏淵禮樂治國", "(D) 孔子批評子路"],
                            "correct_answer": "(C)",
                            "explanation": "孔子大讚顏淵「美哉！德也」，並認同其禮樂治國理念。"
                        },
                        {
                            "id": "(3)",
                            "question_text": "「薰蕕同器」比喻善惡相混，下列成語意義與之相同的是：",
                            "options": ["(A) 牛驥同皁", "(B) 黃鐘毀棄", "(C) 尺短寸長", "(D) 方枘圓鑿"],
                            "correct_answer": "(A)",
                            "explanation": "牛驥同皁比喻賢愚不分，與薰蕕同器意近。"
                        }
                    ]
                }
            ]
        }
    }
]